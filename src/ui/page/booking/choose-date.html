<Page title="Select course date" :_csrf>
    <div class="container">
        <div class="grid-row">
            <div class="column-full">
                <Breadcrumb :breadcrumbs/>
                <h1 class="heading-xlarge">
                    <span class="heading-secondary">Booking a course</span>
                    Select course date
                </h1>
            </div>
        </div>
        <div class="grid-row">
            <div class="column-full">

                {{#if errorTitle}}
                <div class="error-summary" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">
                    <h2 class="heading-medium error-summary-heading" id="error-summary-heading">
                        {{i18n(errorTitle)}}
                    </h2>
                    <p>
                        {{i18n(errorMessage)}}
                    </p>
                </div>
                {{/if}} {{#if events && events.length}}
                <p class="lede">
                    Check on which dates you can attend and in which locations, then select a suitable option below.
                </p>
                <h2 class="heading-small">{{ module.title || course.title }}</h2>
                <form method="post">
                    <div class="div-table div-table--5 ">
                        <div class="div-table__row u-clearfix">
                            <div class="div-table__th">Course dates</div>
                            <div class="div-table__th">Duration</div>
                            <div class="div-table__th">Location</div>
                            <div class="div-table__th">Price</div>
                            <div class="div-table__th">
                                <span class="visually-hidden">Selected</span>
                            </div>
                        </div>
                        {{#each events as event}}
                        <div class="div-table__row u-clearfix">
                            <div class="div-table__cell">{{datetime.formatDate(event.date)}}</div>
                            <div class="div-table__cell">{{course.getDuration()}}</div>
                            <div class="div-table__cell">{{event.location}}</div>
                            <div class="div-table__cell">&pound;{{module.price}}</div>
                            <div class="div-table__cell  div-table__cell--action">
                                <div class="course-radios">
                                    {{#if event.id == selectedEventId}}
                                    <input id="radio-{{event.id}}" type="radio" name="selected-date" class="booking__date" value="{{event.id}}" checked> {{else}}
                                    <input id="radio-{{event.id}}" type="radio" name="selected-date" class="booking__date" value="{{event.id}}"> {{/if}}
                                    <label for="radio-{{event.id}}" class="booking__select-container">
                                        <span class="booking__select booking__select--select">Select</span>
                                        <span class="booking__select booking__select--selected">Selected</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                    </div>

                    <div class="tabbed-section">
                        <BookingTabContent url="/book/{{course.id}}/{{module.id}}/choose-date" tab="{{tab ? tab : 'before-you-book'}}" accessibilityReqs="{{accessibilityReqs ? accessibilityReqs : []}}"
                            :selectedEventId/>
                    </div>
                    <div class="panel panel-border-wide">
                        <p>
                            By booking this course you are agreeing to the terms and conditions
                        </p>
                    </div>
                    <input type="hidden" name="_csrf" value="{{_csrf}}">
                    <input type="submit" class="button" value="Continue" formaction="/book/{{course.id}}/{{module.id}}/choose-date">
                </form>



                {{else}}
                <p>Unfortunately this course is not currently available.</p>
                {{/if}}
            </div>
        </div>
    </div>

</Page>