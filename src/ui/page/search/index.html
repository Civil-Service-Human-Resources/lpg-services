<Page title="Search">
    <div class="container container--main">
        <div class="grid-row ">
            <div class="column-full ">
                <h1 class="heading-xlarge heading heading--page-heading ">
                    Search results
                </h1>
                <div class="search-box u-space-b30">
                    <form name="searchLearning" method="get" action="/search">
                        <div class="form-group search-box__group">
                            <label class="visuallyhidden">Search all available learning</label>
                            <input class="form-control search-box__input" id="q" type="search" name="q" value="{{ query }}" placeholder="Search CSL">
                            <button type="submit" class="search-box__submit">Search</button>
                        </div>
                    </form>
                </div>
                {{#if searchResults && searchResults.suggestion}}
                <span class="search__suggestion">Did you mean <a href="/search?q={{searchResults.suggestion}}">{{searchResults.suggestion}}</a></span>
                {{/if}}

                {{#if searchResults && query}}
                <p class="lede">There were
                    <strong>{{#if searchResults.totalResults}} {{searchResults.totalResults}} {{else
                        }} no {{/if}}</strong>
                    results for
                    <strong>{{ query }}</strong>
                </p>
                {{/if}}
            </div>
        </div>

        <div class="grid-row ">
            <div class="column-full ">
                <div class="resources">
                    {{#if searchResults.results.length}} {{#each searchResults.results as course}}
                    <div class="result">
                        <div class="result__main">
                            <a class="result__title" href="/courses/{{course.id}}"><strong>{{course.title}}</strong></a>
                        </div>
                        <div class="result__info">
                        <span>
                            {{i18n(course.getType())}}
                            {{#if course.getDuration() }}<br>{{course.getDuration()}}{{/if}}
                            <!--<br>Work area: Digital-->
                        </span>
                        </div>
                        <p class="result__description">{{ course.shortDescription }}</p>
                        <div class="result__action">
                            {{#if course.getType() === 'face-to-face'}}
                            <a href="/book/{{course.id}}/{{course.modules[0].id}}/choose-date">Book now</a>
                            {{elseif course.getType() !== 'blended'}}
                            <a href="/courses/{{course.id}}/{{course.modules[0].id}}">Start</a>
                            {{/if}}
                            <a href="/suggestions-for-you/add/{{course.id}}?ref=search">Add to learning plan</a>
                        </div>
                    </div>
                    {{/each}} {{/if}}
                </div>
            </div>
        </div>
        {{#if searchResults.totalResults !== 0}}
        <div class="pager">
            <div class="pager__controls">
                {{#if searchResults.page > 0}}
                <a class="pager__prev" href="/search?q={{query}}&s={{searchResults.size}}&p={{searchResults.page - 1}}">Prev</a>
                {{/if}}
                <ul class="pager__list">
                    {{#each range(Math.ceil(searchResults.totalResults/searchResults.size)) as x}}
                    <li>
                        {{#if x === searchResults.page}}
                        {{x+1}}
                        {{else}}
                        <a href="/search?q={{query}}&s={{searchResults.size}}&p={{x}}">{{x+1}}</a>
                        {{/if}}
                    </li>
                    {{/each}}
                </ul>
                {{#if searchResults.page != (Math.ceil(searchResults.totalResults/searchResults.size)-1)}}
                <a class="pager__next" href="/search?q={{query}}&s={{searchResults.size}}&p={{searchResults.page + 1}}">Next</a>
                {{/if}}
            </div>
            <div class="pager__summary">Showing {{((searchResults.page*searchResults.size)+1)}} â€“ {{((searchResults.page*searchResults.size)+searchResults.results.length)}} of {{searchResults.totalResults}} items</div>
        </div>
        {{/if}}
    </div>
    <script>
    </script>
</Page>