<Page title="Profile">
    <Layout page='profile'>
        <div class="grid-row">
            <div class="column-two-thirds">
                <h1 class="heading-large">Profile</h1>
                {{#if identityServerFailed || !validFields || !signedInUser.givenName || !signedInUser.department || !signedInUser.profession || !signedInUser.grade}}


                    <div class="error-summary" role="alert" aria-labelledby="error-summary-heading-example-1" tabindex="-1">
                        {{#if identityServerFailed || !validFields }}
                        <h2 class="heading-medium error-summary-heading" id="error-summary-heading-example-1">
                            Update failed
                        </h2>
                        {{/if}}
                        <p>
                            {{#if identityServerFailed}}
                                Server error. Update failed, please try again or contact the <a href="mailto:feedback@cslearning.gov.uk">Civil Service Learning Team</a>
                            {{elseif !validFields}}
                                Form error. Fields cannot be empty.
                            {{/if}}
                        </p>
                        {{#if !signedInUser.department || !signedInUser.givenName || !signedInUser.profession || !signedInUser.grade }}
                        <p>
                            To view learning opportunities, you must complete your profile.
                        </p>
                        {{/if}}
                    </div>

                {{/if}}



                <form method="post" class="push-bottom">
                    <div class="form-group">
                        <label class="form-label" for="userName">Email address</label>
                        <input class="form-control" id="userName" name="userName" value="{{signedInUser.emailAddress || ''}}" type="text" readonly="readonly">
                    </div>
                    
                    <div class="form-group {{validFields == false && !user.givenName ?  "form-group-error": ''}}">
                        <label class="form-label" for="givenName">First name</label>
                        {{#if validFields == false && !user.givenName}}
                        <span class="error-message">Department field cannot be empty.</span>
                        {{/if}}
                        <input class="form-control" id="givenName" name="givenName" type="text" value="{{user.givenName || ''}}">
                    </div>


                    <div class="form-group {{validFields == false && !user.department ?  "form-group-error": ''}}">
                        <label class="form-label" for="department">Department</label>
                        {{#if validFields == false && !user.department}}
                        <span class="error-message">Department field cannot be empty.</span>
                        {{/if}}
                        <input class="form-control" id="department" name="department" type="text" value="{{user.department || ''}}">
                    </div>

                    <div class="form-group {{validFields == false && !user.profession ? "form-group-error": ''}}">
                        <label class="form-label" for="profession">Profession</label>
                        {{#if validFields == false && !user.profession}}
                        <span class="error-message">Profession field cannot be empty.</span>
                        {{/if}}
                        <input class="form-control" id="profession" name="profession" type="text" value="{{user.profession || ''}}">
                    </div>

                    <div class="form-group {{validFields == false && !user.grade ? "form-group-error": ''}}">
                        <label class="form-label" for="grade">Grade</label>
                        {{#if validFields == false && !user.grade}}
                        <span class="error-message">Department field cannot be empty.</span>
                        {{/if}}
                        <input class="form-control" id="grade" name="grade" type="text" value="{{user.grade || ''}}">
                    </div>

                    <input type="submit" class="button" value="Continue">
                </form>
            </div>
        </div>
    </Layout>
</Page>

